# [컴퓨터 구조와 운영체제]CPU 성능 향상 기법1-빠른 CPU를 위한 설계 기법

빠른 CPU를 만드는 설계 기법에는 클럭과 멀티코어, 멀티스레드가 있음 

## 클럭

- 컴퓨터 부품들은 ‘클럭 신호’에 맞춰 일사불란하게 움직임
- CPU는 ‘명령어 사이클’ 이라는 정해진 흐름에 맞춰 명령어들을 실행함
- 클럭 속도가 높아지면 CPU는 명령어 사이클을 더 빠르게 반복하고, 다른 부품들도 그에 발맞춰 더 빠르게 작동함 ⇒ **클럭 속도가 높은 CPU는 일반적으로 성능이 좋음**
- **클럭 속도**는 헤르츠(Hz) 단위로 측정하며, 이는 1초에 클럭이 몇 번 반복되는지를 나타냄
- 클럭 속도는 매번 일정하게 유지되지 않음
- CPU는 계속 일정한 클럭 속도를 유지하기보다는 고성능을 요하는 순간에는 순간적으로 클럭 속도를 높이고, 그렇지 않을 때는 유연하게 클럭 속도를 낮춤 → CPU가 기본 클럭 속도(Base)와 최대 클럭 속도(Max)로 나뉜 이유
- 최대 클럭 속도를 강제로 더 끌어 올리는 기법을 **오버클락킹** 이라고 함
- 클럭 속도를 무작정 높이면 발열 문제가 심각해지며, 클럭 속도 만으로 CPU 성능을 올리는 것에는 한계가 있음

## 코어와 멀티코어

- **CPU의 성능을 높이는 방법에는 CPU의 코어와 스레드 수를 늘리는 방법이 있음**
- **코어**는 CPU 내에서 명령어를 실행하는 부품으로 여러 개가 있을 수 있음
- 전통적인 CPU는 코어를 하나만 가졌지만, 기술력의 발전으로 오늘날의 CPU는 코어를 여러 개 포함함
- 코어를 여러 개 포함하고 있는 CPU를 **멀티코어 CPU** 또는 **멀티코어 프로세서** 라고 함
- 멀티 코어의 처리 속도는 단일 코어보다 빠름
    
    
    | 코어 수 | 프로세서 명칭 |
    | --- | --- |
    | 1 | 싱글코어(single-core) |
    | 2 | 듀얼코어(dual-core) |
    | 3 | 트리플코어(triple-core) |
    | 4 | 쿼드코어(quad-core) |
    | 6 | 헥사코어(hexa-core) |
    | 8 | 옥타코어(octa-core) |
    | 10 | 데카코어(deca-core) |
    | 12 | 도데카코어(dodeca-core) |
- 코어마다 처리할 연산이 적절히 분배되지 않는다면 CPU의 연산 속도는 코어 수에 비례하여 증가하지 않음
- 처리하고자 하는 작업량보다 코어 수가 지나치게 많아도 성능에는 크게 영향이 없음
- **코어마다 처리해야 할 명령어들을 얼마나 적절하게 분배하느냐에 따라 연산 속도가 크게 달라짐**

## 스레드와 멀티스레드

- **스레드**는 실행 흐름의 단위
- 스레드에는 CPU에서 사용되는 **하드웨어적 스레드**가 있고, 프로그램에서 사용되는 **소프트웨어적 스레드**가 있음

### 하드웨어적 스레드

- 하드웨어적 스레드는 하나의 코어가 동시에 처리하는 명령어 단위
- 1코어 1스레드 CPU는 명령어를 실행하는 부품이 하나 있고, 한 번에 하나씩 명령어를 실행하는 CPU
- 2코어 4스레드 CPU는 명령어를 실행하는 부품을 두 개 포함하고, 한 번에 네 개의 명령어를 처리할 수 있는 CPU
- 하나의 코어로 여러 명령어를 동시에 처리하는 CPU를 **멀티스레드 프로세스** 또는 **멀티스레드 CPU** 라고 함
- **멀티스레드 프로세서**는 여러 개의 하드웨어적 스레드를 지원하는 CPU
- 인텔의 멀티스레드 기술을 **하이퍼스레딩** 이라고 함
- 

### 소프트웨어적 스레드

- 소프트웨어적 스레드는 하나의 프로그램에서 독립적으로 실행되는 단위
- 하나의 프로그램은 실행되는 과정에서 한 부분만 실행될 수도 있지만, 프로그램의 여러 부분이 동시에 실행될 수도 있음
- 워드 프로세서 프로그램을 개발할 때 사용자로부터 입력받은 내용을 화면에 보여 주는 기능, 맞춤법 검사 기능, 수시로 저장하는 기능이 동시에 수행되길 원한다면, 이 기능들을 작동시키는 코드를 각각의 스레드로 만들면 됨
- 한 번에 하나씩 명령어를 처리하는 1코어 1스레드 CPU도 소프트웨어적 스레드를 수십 개 실행할 수 있음 (=프로그램의 여러 부분을 동시에 실행할 수 있음)

### 멀티스레드 프로세서

- 멀티스레드 프로세서는 하나의 코어로 여러 명령어를 동시에 처리하는 CPU
- 멀티스레드 프로세서를 실제로 설계하는 일은 매우 복잡하지만, 가장 큰 핵심은 레지스터임
- 하나의 코어로 여러 명령어를 동시에 처리하도록 만들려면 프로그램 카운터, 스택 포인터, 데이터 버퍼 레지스터, 데이터 주소 레지스터와 같이 하나의 명령어를 처리하기 위해 꼭 필요한 레지스터를 여러 개 가지고 있으면 됨
- 하나의 명령어를 실행하기 위해 꼭 필요한 레지스터들을 ‘레지스터 세트’ 라고 하면 ALU와 제어장치가 두 개의 레지스터 세트에 저장된 명령어를 해석하고 실행하면 하나의 코어에서 두 개의 명령어가 동시에 실행됨 ⇒ 1코어 2스레드(하드웨어 스레드)
- 하드웨어 스레드를 이용해 하나의 코어로도 여러 명령어를 동시에 처리할 수 있지만, 메모리 속 프로그램 입장에서 봤을 때 하드웨어 스레드는 한 번에 하나의 명령어를 처리하는 CPU와 동일함
- 2코어 4스레드 CPU는 한 번에 네 개의 명령어를 처리할 수 있는데, 프로그램 입장에서 봤을 땐 한 번에 하나의 명령어를 처리하는 CPU가 네 개 있는 것처럼 보임 ⇒ 하드웨어 스레드는 **논리 프로세서**임
- 4코어 8스레드 CPU인 경우 코어는 4개지만, 메모리 속 프로그램이 보기에는 한 번에 하나의 명령어를 처리하는 부품이 여덟 개 있는 것처럼 보이기 때문에 논리 프로세서가 여덟 개로 나옴

- 멀티코어와 멀티스레드의 차이
    - **코어**는 명령어를 실행할 수 있는 ‘하드웨어 부품’
    - **스레드**는 ‘명령어를 실행하는 단위’
    - **멀티코어 프로세서**는 명령어를 실행할 수 있는 하드웨어 부품이 CPU 안에 두 개 이상 있는 CPU
    - **멀티스레드 프로세서**는 하나의 코어로 여러 개의 명령어를 동시에 실행할 수 있는 CPU

### 참조

위 글은 강민철 님의 혼자 공부하는 컴퓨터구조+운영체제를 읽고 작성한 글입니다. 

[혼자 공부하는 컴퓨터 구조+운영체제](https://search.shopping.naver.com/book/catalog/33824626625)